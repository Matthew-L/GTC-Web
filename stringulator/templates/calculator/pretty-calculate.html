{% extends 'base.html' %}

{% load get_range %}

{% block content %}
  <div class="calculate">
    <form method="get" action="/save-set/">
      <input type="hidden" id="string_data" name="variable" value='{{ json_dump }}'>

      <div id="string-set-name">
        <label for="description">Name</label>
        <a href="#">{{ string_set_name }}</a>
      </div>

      {#      <div id="description">#}
      {#        <label for="description">Description</label>#}
      {#        <a href="#">{{ description }}</a>#}
      {#      </div>#}
      <form><textarea id="wysihtml5-textarea" placeholder="Enter your text ..." autofocus></textarea></form>


      <div id="wysihtml5-toolbar" style="display: none;">
        <a data-wysihtml5-command="bold">bold</a>
        <a data-wysihtml5-command="italic">italic</a>

        <!-- Some wysihtml5 commands require extra parameters -->
        <a data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">red</a>
        <a data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">green</a>
        <a data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">blue</a>
        <!-- Some wysihtml5 commands like 'createLink' require extra paramaters specified by the user (eg. href) -->
        <a data-wysihtml5-command="createLink">insert link</a>
        <div data-wysihtml5-dialog="createLink" style="display: none;">
          <label>
            Link:
            <input data-wysihtml5-dialog-field="href" value="http://" class="text">
          </label>
          <a data-wysihtml5-dialog-action="save">OK</a> <a data-wysihtml5-dialog-action="cancel">Cancel</a>
        </div>
      </div>


      <div id="scale-length">
        Scale Length
        <a href="#"></a>
      </div>
      <div class="panel panel-default">
        <table id="strings-table" class="table sortable-table table-bordered table-striped">
          <tr id="table-headers">
            <th>
              <div class="popover_header" id="number">Number</div>
            </th>
            <th>
              <div class="popover_header" id="note">Note</div>
            </th>
            <th>
              <div class="popover_header" id="octave">Octave</div>
            </th>
            <th>
              <div class="popover_header" id="gauge">Gauge</div>
            </th>
            <th>
              <div class="popover_header" id="string-type">String Type</div>
            </th>
            <th>
              <div class="popover_header" id="tension">Tension</div>
            </th>
          </tr>

          <tr id="string-row-1">
            {% include "pretty-forms.html" %}
          </tr>
        </table>
      </div>

      <div id="delete-alert" class="hidden alert alert-danger fade in" role="alert">
        <h4>Are you sure you want to delete the string row?</h4>

        <p>
          <button id="confirm-delete" type="button" class="btn btn-danger">Delete String Row</button>
          <button id="cancel-delete" type="button" class="btn btn-default">Cancel</button>
        </p>
      </div>
      <div id="string-error-alert" class="hidden alert alert-danger fade in" role="alert">
        <a href="#" class="close" data-dismiss="alert">&times;</a>
        <strong>Error!</strong> A problem has occurred while submitting your data.
      </div>

      <div>
        <button class="btn btn-primary" id="insert-more" type="button">
          <span class="glyphicon glyphicon-plus btn-divider"></span>
          Add String
        </button>
        <button class="btn btn-success" id="save-set" type="submit" name="save-set" value="{{ string_set_name }}">
          <span class="glyphicon glyphicon-floppy-disk btn-divider"></span>
          Save String Set
        </button>
      </div>
    </form>
  </div>
{% endblock %}
{% block scripts %}
  {{ block.super }}

  <script type="text/javascript">
    loadStringSet(JSON.parse("{{ json_dump | escapejs}}"));
  </script>

{% endblock %}